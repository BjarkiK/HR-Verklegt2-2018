@model List<TheBookCave.Models.ViewModels.BookDetailedListViewModel>
<h1>Book</h1>


@foreach(var book in @Model) {
    var avgGrade = (@book.Grade / @book.NrOfGrades);
    <div class="book-main-detail"> 
        <img class="book-detail-image" src="~/@book.Picture" alt="Image broken">
        <div class="book-detail-main">
            <div class="book-detail-title">@book.Name</div>
            <div class="book-detail-author-grade">
                <div class="book-detail-author">Written by: @book.Author</div>
                <div class="rating"></div>
                <div class="book-detail-grade" value="@avgGrade"> @avgGrade </div>
            </div>
            <div class="book-detail-description">@book.DetailsEN</div>
        </div>
        <div class="book-detail-buy">
            @if(@book.Discount == 0) {
                <div class="book-detail-price">Price: @book.Price kr</div>
            }
            else {
                int price = Convert.ToInt32(@book.Price);
                int discountPrice = Convert.ToInt32((1 - @book.Discount/100m) * price);
                <div class="book-detail-price-container">
                    <div class="book-detail-price">Price: @discountPrice kr</div>
                    <div class="discounted-price">@book.Price kr</div>
                    <div>(-@book.Discount%)</div>
                </div>
            }
            <div>Free shipping</div>
            <div>Frí heimsending</div>
            <div class="book-detail-addtocart-button" value="@book.Id">Add To Cart</div>
        </div>
    </div>
    <div class="book-detailed-detail">
        <div class="book-detail-window">
            <h4>Genre:</h4>
            <div>@book.Genre</div>
            <h4>Pages:</h4>
            <div>@book.Pages</div>
            <h4>Date:</h4>
            <div>eftir að setja í gagnagrunn</div>
        </div>
        <div class="book-detail-window">
            <h4>Publisher:</h4>
            <div>@book.Publisher</div>
            <h4>Language:</h4>
            <div>eftir að setja í gagnagrunn</div>
            <h4>ISBN:</h4>
            <div>eftir að setja í gagnagrunn</div>
        </div>
    </div>
}
<script src="~/js/bookDetail.js" asp-append-version="true"></script>
<script src="~/js/cart/cart.js" asp-append-version="true"></script>
<script src="~/js/cart/cartAdd.js" asp-append-version="true"></script>
<link rel="stylesheet" href="~/css/bookDetails.css" />

